<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Compact and SpaceGray · BijectiveHilbert.jl</title><link rel="canonical" href="https://adolgert.github.io/BijectiveHilbert.jl/compact/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">BijectiveHilbert.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li><span class="tocitem">Algorithms</span><ul><li><a class="tocitem" href="../simple2d/">Simple2D</a></li><li><a class="tocitem" href="../globalgray/">Global Gray</a></li><li class="is-active"><a class="tocitem" href>Compact and SpaceGray</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Algorithms</a></li><li class="is-active"><a href>Compact and SpaceGray</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Compact and SpaceGray</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/adolgert/BijectiveHilbert.jl/blob/master/docs/src/compact.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Compact-and-SpaceGray"><a class="docs-heading-anchor" href="#Compact-and-SpaceGray">Compact and SpaceGray</a><a id="Compact-and-SpaceGray-1"></a><a class="docs-heading-anchor-permalink" href="#Compact-and-SpaceGray" title="Permalink"></a></h1><p>This algorithm is used for professional database implementation because it focuses on how to pack dimensions of different sizes into the smallest-possible Hilbert index. If the data is high-dimensional and one of the indices is larger than the others, then the usual Hilbert curve encodes all indices at the same size as the largest one. This means the Hilbert index needs to use a larger data type, which means it needs more storage. Hamilton and Rau-Chaplin used mathematical manipulation to drop unused bits from the Hilbert index while keeping its central feature, that nearby data remains nearby.</p><p>Both the <a href="../usage/#BijectiveHilbert.Compact"><code>Compact</code></a> and <a href="../usage/#BijectiveHilbert.SpaceGray"><code>SpaceGray</code></a> algorithms use what&#39;s called the space key algorithm for Hilbert curves. It&#39;s not recursive. It follows four steps. Quoting their paper <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>:</p><ol><li><p>Find the cell containing the point of interest.</p></li><li><p>Update the key (index) value appropriately.</p></li><li><p>Transform as necessary; and</p></li><li><p>Continue until sufficient precision has been obtained.</p></li></ol><p>This is a very typical way to generate Hilbert curves, and the algorithm, which I labeled SpaceGray, it their implementation of a classic space key algorithm that relies on Gray codes. They then layer the space key algorithm with a bit-packing algorithm that relies on Gray code rank. This is a mask, to exclude unused bits, and an ordering on the remaining bits that preserves the Hilbert structure.</p><p>As a note for developers, Hamilton&#39;s original tech report <sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup> has errors that look, to me, like he developed the work for two dimensions and expanded it, incompletely, for n dimensions. It&#39;s impressively-detailed math that leads to a concise formulation. I wouldn&#39;t have figured out the problems, except that there is a copy of <a href="https://github.com/pdebuyl/libhilbert">Hamilton&#39;s code</a>, corrected, on Github.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Hamilton, Chris H., and Andrew Rau-Chaplin. &quot;Compact Hilbert indices for multi-dimensional data.&quot; First International Conference on Complex, Intelligent and Software Intensive Systems (CISIS&#39;07). IEEE, 2007.</li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>Hamilton, Chris. &quot;Compact hilbert indices.&quot; Dalhousie University, Faculty of Computer Science, Technical Report CS-2006-07 (2006).</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../globalgray/">« Global Gray</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 4 February 2021 04:14">Thursday 4 February 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
